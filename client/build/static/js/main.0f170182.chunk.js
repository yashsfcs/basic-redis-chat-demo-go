(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{35:function(e,t,s){},36:function(e,t,s){},37:function(e,t,s){},44:function(e,t,s){},47:function(e,t,s){},67:function(e,t,s){"use strict";s.r(t);s(34),s(35),s(36),s(37);var c=s(1),n=s(15),a=s.n(n),r=s(3),i=s(7),o=s.n(i),l=s(12),d=s(73),j=s(0),u=function(e){var t=e.width,s=void 0===t?64:t,c=e.height,n=void 0===c?64:c;return Object(j.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",viewBox:"0 0 32 32",height:n,width:s,children:[Object(j.jsx)("script",{}),Object(j.jsxs)("defs",{children:[Object(j.jsx)("path",{id:"prefix__a",d:"M45.536 38.764c-2.013 1.05-12.44 5.337-14.66 6.494s-3.453 1.146-5.207.308-12.85-5.32-14.85-6.276c-1-.478-1.524-.88-1.524-1.26v-3.813s14.447-3.145 16.78-3.982 3.14-.867 5.126-.14 13.853 2.868 15.814 3.587v3.76c0 .377-.452.8-1.477 1.324z"}),Object(j.jsx)("path",{id:"prefix__b",d:"M45.536 28.733c-2.013 1.05-12.44 5.337-14.66 6.494s-3.453 1.146-5.207.308-12.85-5.32-14.85-6.276-2.04-1.613-.077-2.382l15.332-5.935c2.332-.837 3.14-.867 5.126-.14s12.35 4.853 14.312 5.57 2.037 1.31.024 2.36z"})]}),Object(j.jsxs)("g",{transform:"matrix(.84833 0 0 .84833 -7.884 -9.45)",children:[Object(j.jsx)("use",{fill:"#a41e11",xlinkHref:"#prefix__a"}),Object(j.jsx)("path",{d:"M45.536 34.95c-2.013 1.05-12.44 5.337-14.66 6.494s-3.453 1.146-5.207.308-12.85-5.32-14.85-6.276-2.04-1.613-.077-2.382l15.332-5.936c2.332-.836 3.14-.867 5.126-.14S43.55 31.87 45.51 32.6s2.037 1.31.024 2.36z",fill:"#d82c20"}),Object(j.jsx)("use",{fill:"#a41e11",xlinkHref:"#prefix__a",y:-6.218}),Object(j.jsx)("use",{fill:"#d82c20",xlinkHref:"#prefix__b"}),Object(j.jsx)("path",{d:"M45.536 26.098c-2.013 1.05-12.44 5.337-14.66 6.495s-3.453 1.146-5.207.308-12.85-5.32-14.85-6.276c-1-.478-1.524-.88-1.524-1.26V21.55s14.447-3.145 16.78-3.982 3.14-.867 5.126-.14 13.853 2.868 15.814 3.587v3.76c0 .377-.452.8-1.477 1.324z",fill:"#a41e11"}),Object(j.jsx)("use",{fill:"#d82c20",xlinkHref:"#prefix__b",y:-6.449}),Object(j.jsxs)("g",{fill:"#fff",children:[Object(j.jsx)("path",{d:"M29.096 20.712l-1.182-1.965-3.774-.34 2.816-1.016-.845-1.56 2.636 1.03 2.486-.814-.672 1.612 2.534.95-3.268.34zM22.8 24.624l8.74-1.342-2.64 3.872z"}),Object(j.jsx)("ellipse",{cx:20.444,cy:21.402,rx:4.672,ry:1.811})]}),Object(j.jsx)("path",{d:"M42.132 21.138l-5.17 2.042-.004-4.087z",fill:"#7a0c00"}),Object(j.jsx)("path",{d:"M36.963 23.18l-.56.22-5.166-2.042 5.723-2.264z",fill:"#ad2115"})]})]})},b=(s(44),["Pablo","Joe","Mary","Alex"]);function m(e){var t=e.onLogIn,s=e.setShowLogin,n=Object(c.useState)((function(){return b[Math.floor(Math.random()*b.length)]})),a=Object(r.a)(n,2),i=a[0],m=a[1],O=Object(c.useState)("password123"),x=Object(r.a)(O,2),f=x[0],p=x[1],g=Object(c.useState)(null),v=Object(r.a)(g,2),y=v[0],N=v[1],w=function(){var e=Object(l.a)(o.a.mark((function e(c){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:c.preventDefault(),t(i,f,s);case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(j.jsx)(j.Fragment,{children:Object(j.jsx)("div",{className:"login-form text-center login-page",children:Object(j.jsxs)("div",{className:"rounded",style:{boxShadow:"0 0.75rem 1.5rem rgba(18,38,63,.03)"},children:[Object(j.jsxs)("div",{className:"position-relative",children:[Object(j.jsxs)("div",{className:"row no-gutters align-items-center",style:{maxWidth:400,backgroundColor:"rgba(85, 110, 230, 0.25)",paddingLeft:20,paddingRight:20,borderTopLeftRadius:4,borderTopRightRadius:4},children:[Object(j.jsxs)("div",{className:"col text-primary text-left",children:[Object(j.jsx)("h3",{className:"font-size-15",children:"Welcome Back !"}),Object(j.jsx)("p",{children:"Sign in to continue"})]}),Object(j.jsx)("div",{className:"col align-self-end",children:Object(j.jsx)("img",{alt:"welcome back",style:{maxWidth:"100%"},src:"".concat("","/welcome-back.png")})})]}),Object(j.jsx)("div",{className:"position-absolute",style:{bottom:-36,left:20},children:Object(j.jsx)("div",{style:{backgroundColor:"rgb(239, 242, 247)",width:72,height:72},className:"rounded-circle d-flex align-items-center justify-content-center",children:Object(j.jsx)(u,{width:34,height:34})})})]}),Object(j.jsxs)("form",{className:"bg-white text-left px-4",style:{paddingTop:58,borderBottomLeftRadius:4,borderBottomRightRadius:4},onSubmit:w,children:[Object(j.jsx)("label",{className:"font-size-12",children:"Name"}),Object(j.jsx)("div",{className:"username-select mb-3",children:Object(j.jsx)(h,{username:i,setUsername:m,names:b})}),Object(j.jsx)("label",{htmlFor:"inputPassword",className:"font-size-12",children:"Password"}),Object(j.jsx)("input",{value:f,onChange:function(e){return p(e.target.value)},type:"password",id:"inputPassword",className:"form-control",placeholder:"Password",required:!0}),Object(j.jsx)("div",{style:{height:30}}),Object(j.jsx)("button",{className:"btn btn-lg btn-primary btn-block",type:"submit",children:"Sign in"}),Object(j.jsx)("div",{className:"login-error-anchor",children:Object(j.jsx)("div",{className:"toast-box",children:Object(j.jsxs)(d.a,{style:{minWidth:277},onClose:function(){return N(null)},show:null!==y,delay:3e3,autohide:!0,children:[Object(j.jsxs)(d.a.Header,{children:[Object(j.jsx)("img",{src:"holder.js/20x20?text=%20",className:"rounded mr-2",alt:""}),Object(j.jsx)("strong",{className:"mr-auto",children:"Error"})]}),Object(j.jsx)(d.a.Body,{children:y})]})})}),Object(j.jsx)("div",{style:{height:30}})]})]})})})}var h=function(e){var t,s=e.username,n=e.setUsername,a=e.names,i=void 0===a?[""]:a,o=Object(c.useState)(!1),l=Object(r.a)(o,2),d=l[0],u=l[1],b=Object(c.useState)(0),m=Object(r.a)(b,2),h=m[0],O=m[1],x=Object(c.useRef)(),f=null===(t=x.current)||void 0===t?void 0:t.getBoundingClientRect().width;return Object(c.useEffect)((function(){O(f)}),[f]),Object(c.useEffect)((function(){if(d){var e=function(){return u(!1)};return document.addEventListener("click",e),function(){return document.removeEventListener("click",e)}}}),[d]),Object(c.useEffect)((function(){var e;d&&(null===(e=x.current)||void 0===e||e.focus())}),[d]),Object(j.jsxs)("div",{tabIndex:0,ref:x,className:"username-select-dropdown ".concat(d?"open":""),onClick:function(){return u((function(e){return!e}))},children:[Object(j.jsxs)("div",{className:"username-select-row",children:[Object(j.jsx)("div",{children:s}),Object(j.jsx)("div",{children:Object(j.jsx)("svg",{width:24,height:24,children:Object(j.jsx)("path",{d:"M7 10l5 5 5-5z",fill:"#333"})})})]}),Object(j.jsx)("div",{style:{width:h},className:"username-select-block ".concat(d?"open":""),children:i.map((function(e){return Object(j.jsx)("div",{className:"username-select-block-item",onClick:function(){return n(e)},children:e},e)}))})]})},O=s(13),x=(s(47),s(16)),f=s.n(x),p=s(9),g=s.n(p),v=window.localStorage,y="session.uuid",N="user.uuid",w="user.accessKey";function k(e,t){v.setItem(e,t)}function U(e){var t=v.getItem(e);return null==t?"":t}var M=s(11),S=s(2),C=function(e,t){switch(t.type){case"clear":return{currentRoom:"0",rooms:{},users:{}};case"set user":return console.log("set user",t.payload),Object(S.a)(Object(S.a)({},e),{},{user:t.payload});case"set users":return Object(S.a)(Object(S.a)({},e),{},{users:t.payload});case"make user online":return Object(S.a)(Object(S.a)({},e),{},{users:Object(S.a)(Object(S.a)({},e.users),{},Object(M.a)({},t.payload,Object(S.a)(Object(S.a)({},e.users[t.payload]),{},{online:!0})))});case"append users":return Object(S.a)(Object(S.a)({},e),{},{users:Object(S.a)(Object(S.a)({},e.users),t.payload)});case"set messages":return Object(S.a)(Object(S.a)({},e),{},{rooms:Object(S.a)(Object(S.a)({},e.rooms),{},Object(M.a)({},e.currentRoom,Object(S.a)(Object(S.a)({},e.rooms[e.currentRoom]),{},{messages:t.payload,offset:t.payload.length})))});case"prepend messages":var s=[].concat(Object(O.a)(t.payload.messages),Object(O.a)(e.rooms[t.payload.id].messages));return Object(S.a)(Object(S.a)({},e),{},{rooms:Object(S.a)(Object(S.a)({},e.rooms),{},Object(M.a)({},t.payload.id,Object(S.a)(Object(S.a)({},e.rooms[t.payload.id]),{},{messages:s,offset:s.length})))});case"append message":return void 0===e.rooms[t.payload.id]?e:Object(S.a)(Object(S.a)({},e),{},{rooms:Object(S.a)(Object(S.a)({},e.rooms),{},Object(M.a)({},t.payload.id,Object(S.a)(Object(S.a)({},e.rooms[t.payload.id]),{},{lastMessage:t.payload.message,messages:e.rooms[t.payload.id].messages?[].concat(Object(O.a)(e.rooms[t.payload.id].messages),[t.payload.message]):void 0})))});case"set last message":return Object(S.a)(Object(S.a)({},e),{},{rooms:Object(S.a)(Object(S.a)({},e.rooms),{},Object(M.a)({},t.payload.id,Object(S.a)(Object(S.a)({},e.rooms[t.payload.id]),{},{lastMessage:t.payload.lastMessage})))});case"set current room":return Object(S.a)(Object(S.a)({},e),{},{currentRoom:t.payload});case"add room":return Object(S.a)(Object(S.a)({},e),{},{rooms:Object(S.a)(Object(S.a)({},e.rooms),{},Object(M.a)({},t.payload.id,t.payload))});case"set rooms":var c=t.payload,n=Object(S.a)({},e.rooms);return c.forEach((function(e){n[e.UUID]=Object(S.a)(Object(S.a)({},e),{},{id:e.UUID,name:e.Username,messages:n[e.id]&&n[e.id].messages})})),Object(S.a)(Object(S.a)({},e),{},{rooms:n});default:return e}},I={currentRoom:"",rooms:{"":{id:"",name:"General"}},users:{},user:{}},L=Object(c.createContext)(),z=function(){var e=Object(c.useContext)(L),t=Object(r.a)(e,2);return[t[0],t[1]]},_=function(){return Object(c.useReducer)(C,I)},R={sys:function(e,t){var s=t.dispatch;"function"==typeof D[e.sys.type]?D[e.sys.type](e.sys):console.log("Unknown message sys.type: "+e.sys.type);e.sys.signIn&&s({type:"set user",payload:e.sys.signIn})},error:function(e){console.log("error: "+e.error.code+" - "+e.error.message,e)},ready:function(e){k(y,e.ready.sessionUUID)},authorized:function(e){k(N,e.authorized.userUUID),k(w,e.authorized.accessKey)},users:function(e,t){var s=t.dispatch;s({type:"set users",payload:e.users.users}),s({type:"set rooms",payload:e.users.users})},channelJoin:function(e,t){var s=t.dispatch;s({type:"set messages",payload:e.channelJoin.messages||[]}),s({type:"set users",payload:e.channelJoin.users})},channelMessage:function(e,t){var s=t.dispatch;console.log("append message",e),s({type:"append message",payload:{id:e.channelMessage.RecipientUUID,message:e.channelMessage}})}},D={signIn:void console.log("sysSignIn")};var B="ws"+("https"===window.location.protocol.substr(0,5)?"s":"")+"://"+window.location.host+"/ws",E=new WebSocket(B);function F(e){var t=JSON.stringify(e);E.send(t)}function J(e){return{SUUID:U(y),type:"channelJoin",userUUID:U(N),accessKey:U(w),channelJoin:{recipientUUID:e}}}var P=s(4),H="";function T(e,t,s){var c=new Promise((function(s,c){F(function(e,t){return{SUUID:U(y),type:"signIn",signIn:{username:e,password:t}}}(e,t)),s()}));c.then((function(){F({SSUID:U(y),type:"users",userUUID:U(N),accessKey:U(w)})})),c.then((function(){F(J(""))})),c.catch((function(e){console.log(e)})),s(!1)}function W(e){null==e&&(e=Object(P.node)("input-message")),console.log("channelMessage",e);var t=new Promise((function(t,s){return F((c=H,n=e,{SUUID:U(y),type:"channelMessage",userUUID:U(N),accessKey:U(w),channelMessage:{recipientUUID:c,message:n}}));var c,n}));return t.then((function(){})),t.catch((function(e){return console.log(e)})),!1}g.a.defaults.withCredentials=!0;var A=function(e){return"".concat("").concat(e)},K=(s(30),s(68),function(){return Object(j.jsxs)("svg",{width:"32",height:"32",viewBox:"0 0 1651 1651",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[Object(j.jsx)("rect",{width:"1651",height:"1651",rx:"14",fill:"white"}),Object(j.jsx)("path",{d:"M495.286 1098.96L497.967 1070.86L478.04 1050.88C408.572 981.233 368 891.771 368 795.344C368 585.371 565.306 402 826 402C1086.69 402 1284 585.371 1284 795.344C1284 1005.32 1086.69 1188.69 826 1188.69V1248.69L825.913 1188.69C779.837 1188.75 733.952 1182.77 689.432 1170.9L667.26 1164.98L646.8 1175.37C620.731 1188.61 562.74 1213.98 467.32 1235.35C480.554 1191.83 490.95 1144.39 495.286 1098.96Z",stroke:"url(#paint0_linear)",strokeWidth:"120"}),Object(j.jsx)("defs",{children:Object(j.jsxs)("linearGradient",{id:"paint0_linear",x1:"662.312",y1:"397.956",x2:"416.164",y2:"1678.7",gradientUnits:"userSpaceOnUse",children:[Object(j.jsx)("stop",{stopColor:"#7514FB"}),Object(j.jsx)("stop",{offset:"0.624243",stopColor:"#F26D41"}),Object(j.jsx)("stop",{offset:"1",stopColor:"#F43B4B"})]})})]})}),V=function(e){var t=e.name,s=e.id,n=Object(c.useMemo)((function(){var e=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"1",t=13,s=654,c=531,n=+e.split(":").pop(),a=+e.split(":").reverse().pop();a<0&&(a+=3555);var r=(n*s+a*c)%t;return"".concat("","/avatars/").concat(r,".jpg")}(""+s);return"Mary"===t?"".concat("","/avatars/0.jpg"):"Pablo"===t?"".concat("","/avatars/2.jpg"):"Joe"===t?"".concat("","/avatars/9.jpg"):"Alex"===t?"".concat("","/avatars/8.jpg"):e}),[s,t]);return Object(j.jsx)(j.Fragment,{children:"General"!==t?Object(j.jsx)("img",{src:n,alt:t,style:{width:32,height:32,objectFit:"cover"},className:"rounded-circle avatar-xs"}):Object(j.jsx)("div",{className:"overflow-hidden rounded-circle",children:Object(j.jsx)(K,{})})})},G=function(e){var t=e.online,s=e.hide,c=void 0!==s&&s,n=e.width,a=void 0===n?8:n,r=e.height,i=void 0===r?8:r;return Object(j.jsx)("div",{className:t?"rounded-circle bg-success":"rounded-circle bg-gray",style:{width:a,height:i,opacity:c?0:1}})},q=function(e){var t=e.id,s=e.name,n=z(),a=Object(r.a)(n,1)[0],i=Object(c.useMemo)((function(){try{var e=Math.abs(parseInt(t.split(":").reverse().pop())),c=e>0,n=Object.entries(a.users).filter((function(e){return Object(r.a)(e,2)[1].Username===s})).map((function(e){return Object(r.a)(e,2)[1]})),i=!1;return n.length>0&&(i=n[0].OnLine,e=+n[0].id),[c,i,e]}catch(o){return[!1,!1,"0"]}}),[t,s,a.users]),o=Object(r.a)(i,3);return{isUser:o[0],online:o[1],userId:o[2],name:e.name}},X=function(e){var t=e.room,s=e.active,c=void 0!==s&&s,n=e.onClick,a=q(t),r=a.online,i=a.name,o=a.userId;return Object(j.jsxs)("div",{onClick:n,className:"chat-list-item d-flex align-items-start rounded ".concat(c?"bg-white":""),children:[Object(j.jsx)("div",{className:"align-self-center mr-3",children:Object(j.jsx)(G,{online:r,hide:"0"===t.id})}),Object(j.jsx)("div",{className:"align-self-center mr-3",children:Object(j.jsx)(V,{name:i,id:o})}),Object(j.jsx)("div",{className:"media-body overflow-hidden",children:Object(j.jsx)("h5",{className:"text-truncate font-size-14 mb-1",children:i})})]})},Z=s(71),Q=function(e){var t=e.onLogOut,s=e.col,c=void 0===s?5:s,n=e.noinfo,a=void 0!==n&&n;return Object(j.jsxs)("div",{onClick:function(){return t()},style:{cursor:"pointer"},className:"col-".concat(c," text-danger ").concat(a?"":"text-right"),children:[Object(j.jsx)(Z.a,{})," Log out"]})},Y=function(e){var t=e.user,s=void 0===t?{}:t,c=e.col,n=void 0===c?7:c,a=e.noinfo,r=void 0!==a&&a;return Object(j.jsxs)("div",{className:"col-".concat(n," d-flex align-items-center ").concat(r?"justify-content-end":""),children:[Object(j.jsx)("div",{className:"align-self-center ".concat(r?"":"mr-3"),children:Object(j.jsx)(V,{name:s.username,id:s.id})}),!r&&Object(j.jsxs)("div",{className:"media-body",children:[Object(j.jsx)("h5",{className:"font-size-14 mt-0 mb-1",children:s.username}),Object(j.jsxs)("div",{className:"d-flex align-items-center",children:[Object(j.jsx)(G,{online:!0}),Object(j.jsx)("p",{className:"ml-2 text-muted mb-0",children:"Active"})]})]})]})},$=function(e){var t=e.user,s=e.onLogOut;return Object(j.jsx)("div",{className:"row no-gutters align-items-center pl-4 pr-2 pb-3",style:{height:"inherit",flex:0,minHeight:50},children:Object(j.jsxs)(j.Fragment,{children:[Object(j.jsx)(Y,{user:t,col:8}),Object(j.jsx)(Q,{onLogOut:s,col:4})]})})},ee=function(e){var t=e.rooms,s=e.user,n=e.currentRoom,a=e.onLogOut,i=z(),o=Object(r.a)(i,2),l=(o[0],o[1]),d=Object(c.useMemo)((function(){var e=Object.values(t),s=e.filter((function(e){return"0"===e.id})),c=e.filter((function(e){return"0"!==e.id}));return c=c.sort((function(e,t){return+e.id.split(":").pop()-+t.id.split(":").pop()})),[].concat(Object(O.a)(s||[]),Object(O.a)(c))}),[t]);return Object(j.jsx)(j.Fragment,{children:Object(j.jsxs)("div",{className:"chat-list-container flex-column d-flex pr-4",children:[Object(j.jsx)("div",{className:"py-2",children:Object(j.jsx)("p",{className:"h5 mb-0 py-1 chats-title",children:"Chats"})}),Object(j.jsx)("div",{className:"messages-box flex flex-1",children:Object(j.jsx)("div",{className:"list-group rounded-0",children:d.map((function(e){return Object(j.jsx)(X,{onClick:function(){l({type:"set current room",payload:e.id}),function(e){var t=new Promise((function(t,s){F(J(e)),t()}));t.then((function(){H=e})),t.catch((function(e){return console.log(e)}))}(e.id)},active:n===e.id,room:e},e.id)}))})}),Object(j.jsx)($,{user:s,onLogOut:a})]})})},te=function(e){var t=e.message;return Object(j.jsx)("p",{className:"mb-2 fs-6 fw-light fst-italic text-black-50 text-center",style:{opacity:.8,fontSize:14},children:t})},se=function(){return Object(j.jsx)("div",{className:"no-messages flex-column d-flex flex-row justify-content-center align-items-center text-muted text-center",children:Object(j.jsx)("div",{className:"spinner-border",role:"status",children:Object(j.jsx)("span",{className:"visually-hidden"})})})},ce=s(72),ne=function(){return Object(j.jsxs)("div",{className:"no-messages flex-column d-flex flex-row justify-content-center align-items-center text-muted text-center",children:[Object(j.jsx)(ce.a,{size:96}),Object(j.jsx)("p",{children:"No messages"})]})},ae=function(){return Object(j.jsxs)("svg",{width:12,height:12,className:"prefix__MuiSvgIcon-root prefix__jss80 prefix__MuiSvgIcon-fontSizeLarge",viewBox:"0 0 24 24","aria-hidden":"true",children:[Object(j.jsx)("path",{d:"M11.99 2C6.47 2 2 6.48 2 12s4.47 10 9.99 10C17.52 22 22 17.52 22 12S17.52 2 11.99 2zM12 20c-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8-3.58 8-8 8z"}),Object(j.jsx)("path",{d:"M12.5 7H11v6l5.25 3.15.75-1.23-4.5-2.67z"})]})},re=function(e){var t=e.username,s=void 0===t?"user":t,c=e.message,n=void 0===c?"Lorem ipsum dolor...":c,a=e.date;return Object(j.jsxs)("div",{className:"d-flex",children:[Object(j.jsx)("div",{style:{flex:1}}),Object(j.jsx)("div",{style:{width:"50%"},className:"text-right mb-4",children:Object(j.jsx)("div",{className:"conversation-list d-inline-block bg-light px-3 py-2",style:{borderRadius:12},children:Object(j.jsxs)("div",{className:"ctext-wrap",children:[Object(j.jsx)("div",{className:"conversation-name text-left text-primary mb-1",style:{fontWeight:600},children:s}),Object(j.jsx)("p",{className:"text-left",children:n}),Object(j.jsxs)("p",{className:"chat-time mb-0",children:[Object(j.jsx)(ae,{})," ",f()(a).format("LT")," "]})]})})})]})},ie=function(e){var t=e.user,s=e.message,c=void 0===s?"Lorem ipsum dolor...":s,n=e.date,a=e.onUserClicked;return Object(j.jsxs)("div",{className:"d-flex",children:[Object(j.jsx)("div",{style:{width:"50%"},className:"text-left mb-4",children:Object(j.jsx)("div",{className:"conversation-list d-inline-block px-3 py-2",style:{borderRadius:12,backgroundColor:"rgba(85, 110, 230, 0.1)"},children:Object(j.jsxs)("div",{className:"ctext-wrap",children:[t&&Object(j.jsxs)("div",{className:"conversation-name text-primary d-flex align-items-center mb-1",children:[Object(j.jsx)("div",{className:"mr-2",style:{fontWeight:600,cursor:"pointer"},onClick:a,children:t.Username}),Object(j.jsx)(G,{width:7,height:7,online:t.OnLine})]}),Object(j.jsx)("p",{className:"text-left",children:c}),Object(j.jsxs)("p",{className:"chat-time mb-0",children:[Object(j.jsx)(ae,{})," ",f()(n).format("LT")," "]})]})})}),Object(j.jsx)("div",{style:{flex:1}})]})},oe=function(e){var t=e.messageListElement,s=e.messages,c=e.room,n=e.onLoadMoreMessages,a=e.user,r=void 0===a?{}:a,i=e.onUserClicked;return Object(j.jsxs)("div",{ref:t,className:"chat-box-wrapper position-relative d-flex",children:[void 0===s?Object(j.jsx)(se,{}):0===s.length?Object(j.jsx)(ne,{}):Object(j.jsx)(j.Fragment,{}),Object(j.jsx)("div",{className:"px-4 pt-5 chat-box position-absolute",children:s&&0!==s.length&&Object(j.jsxs)(j.Fragment,{children:[c.offset&&c.offset>=15?Object(j.jsxs)("div",{className:"d-flex flex-row align-items-center mb-4",children:[Object(j.jsx)("div",{style:{height:1,backgroundColor:"#eee",flex:1}}),Object(j.jsx)("div",{className:"mx-3",children:Object(j.jsx)("button",{"aria-haspopup":"true","aria-expanded":"true",type:"button",onClick:n,className:"btn rounded-button btn-secondary nav-btn",id:"__BVID__168__BV_toggle_",children:"Load more"})}),Object(j.jsx)("div",{style:{height:1,backgroundColor:"#eee",flex:1}})]}):Object(j.jsx)(j.Fragment,{}),s.map((function(e,t){var s=e.Message+e.CreatedAt+e.SenderUUID+t;return"info"===e.SenderUUID?Object(j.jsx)(te,{message:e.Message},s):e.SenderUUID!==r.uuid?Object(j.jsx)(ie,{onUserClicked:function(){return i(e.SenderUUID)},message:e.Message,date:e.CreatedAt,user:e.Sender},s):Object(j.jsx)(re,{username:e.Sender?e.Sender.Username:"",message:e.Message,date:e.CreatedAt},s)}))]})})]})},le=function(e){var t=e.message,s=e.setMessage,c=e.onSubmit;return Object(j.jsx)("div",{className:"p-3 chat-input-section",children:Object(j.jsxs)("form",{className:"row",onSubmit:c,children:[Object(j.jsx)("div",{className:"col",children:Object(j.jsx)("div",{className:"position-relative",children:Object(j.jsx)("input",{value:t,onChange:function(e){return s(e.target.value)},type:"text",placeholder:"Enter Message...",className:"form-control chat-input"})})}),Object(j.jsx)("div",{className:"col-auto",children:Object(j.jsxs)("button",{type:"submit",className:"btn btn-primary btn-rounded chat-send w-md",children:[Object(j.jsx)("span",{className:"d-none d-sm-inline-block mr-2",children:"Send"}),Object(j.jsx)("svg",{width:13,height:13,viewBox:"0 0 24 24",tabIndex:-1,children:Object(j.jsx)("path",{d:"M2.01 21L23 12 2.01 3 2 10l15 2-15 2z",fill:"white"})})]})})]})})};function de(e){var t=e.onLogOut,s=e.user,n=e.onMessageSend,a=(e.users,z()),i=Object(r.a)(a,1)[0],o=i.rooms,l=i.currentRoom,d=Object(c.useState)({}),u=Object(r.a)(d,2),b=u[0],m=u[1],h=Object(c.useState)(""),O=Object(r.a)(h,2),x=O[0],f=O[1],p=Object(c.useRef)(null),g=Object(c.useCallback)((function(){p.current&&p.current.scrollTo({top:p.current.scrollHeight})}),[]);return Object(c.useEffect)((function(){g()}),[o[l].messages,g]),Object(c.useEffect)((function(){m(o[l])}),[l]),Object(j.jsx)("div",{className:"container py-5 px-4",children:Object(j.jsxs)("div",{className:"chat-body row overflow-hidden shadow bg-light rounded",children:[Object(j.jsx)("div",{className:"col-4 px-0",children:Object(j.jsx)(ee,{user:s,onLogOut:t,rooms:o,currentRoom:l})}),Object(j.jsxs)("div",{className:"col-8 px-0 flex-column bg-white rounded-lg",children:[Object(j.jsx)("div",{className:"px-4 py-4",style:{borderBottom:"1px solid #eee"},children:Object(j.jsxs)("h2",{className:"font-size-15 mb-0",children:[b?b.name:"Room"," Room"]})}),Object(j.jsx)(oe,{messageListElement:p,messages:o[l].messages,room:o[l],user:s}),Object(j.jsx)(le,{message:x,setMessage:f,onSubmit:function(e){e.preventDefault(),x&&(n(x.trim(),b.id),f(""),p.current.scrollTop=p.current.scrollHeight)}})]})]})})}var je=function(e){var t=e.link;return Object(j.jsx)("a",{href:t,target:"_blank",title:"Github",children:Object(j.jsxs)("svg",{width:24,height:24,viewBox:"0 0 64 64","aria-labelledby":"title","aria-describedby":"desc",role:"img",children:[Object(j.jsx)("path",{"data-name":"layer2",d:"M32 0a32.021 32.021 0 0 0-10.1 62.4c1.6.3 2.2-.7 2.2-1.5v-6c-8.9 1.9-10.8-3.8-10.8-3.8-1.5-3.7-3.6-4.7-3.6-4.7-2.9-2 .2-1.9.2-1.9 3.2.2 4.9 3.3 4.9 3.3 2.9 4.9 7.5 3.5 9.3 2.7a6.93 6.93 0 0 1 2-4.3c-7.1-.8-14.6-3.6-14.6-15.8a12.27 12.27 0 0 1 3.3-8.6 11.965 11.965 0 0 1 .3-8.5s2.7-.9 8.8 3.3a30.873 30.873 0 0 1 8-1.1 30.292 30.292 0 0 1 8 1.1c6.1-4.1 8.8-3.3 8.8-3.3a11.965 11.965 0 0 1 .3 8.5 12.1 12.1 0 0 1 3.3 8.6c0 12.3-7.5 15-14.6 15.8a7.746 7.746 0 0 1 2.2 5.9v8.8c0 .9.6 1.8 2.2 1.5A32.021 32.021 0 0 0 32 0z",fill:"#595F70"}),Object(j.jsx)("path",{"data-name":"layer1",d:"M12.1 45.9c-.1.2-.3.2-.5.1s-.4-.3-.3-.5.3-.2.6-.1c.2.2.3.4.2.5zm1.3 1.5a.589.589 0 0 1-.8-.8.631.631 0 0 1 .7.1.494.494 0 0 1 .1.7zm1.3 1.8a.585.585 0 0 1-.7-.3.6.6 0 0 1 0-.8.585.585 0 0 1 .7.3c.2.3.2.7 0 .8zm1.7 1.8c-.2.2-.5.1-.8-.1-.3-.3-.4-.6-.2-.8a.619.619 0 0 1 .8.1.554.554 0 0 1 .2.8zm2.4 1c-.1.3-.4.4-.8.3s-.6-.4-.5-.7.4-.4.8-.3c.3.2.6.5.5.7zm2.6.2c0 .3-.3.5-.7.5s-.7-.2-.7-.5.3-.5.7-.5c.4.1.7.3.7.5zm2.4-.4q0 .45-.6.6a.691.691 0 0 1-.8-.3q0-.45.6-.6c.5-.1.8.1.8.3z",fill:"#595F70"})]})})},ue=function(){var e=Object(c.useState)(null),t=Object(r.a)(e,2),s=t[0],n=t[1];return Object(c.useEffect)((function(){g.a.get(A("/links")).then((function(e){return e.data})).catch((function(e){return null})).then(n)}),[]),Object(j.jsxs)("nav",{className:"navbar navbar-expand-lg navbar-light bg-white",children:[Object(j.jsx)("span",{className:"navbar-brand",children:"Redis chat demo"}),null!==s?Object(j.jsx)("span",{className:"navbar-text",children:s.github&&Object(j.jsx)(je,{link:s.github})}):Object(j.jsx)(j.Fragment,{})]})},be=function(){var e=Object(c.useState)(!0),t=Object(r.a)(e,2),s=t[0],n=t[1],a=_(),i=Object(r.a)(a,2),o=i[0],l=i[1];return Object(c.useEffect)((function(){var e;e={dispatch:l,state:o},E.onmessage=function(t){var s=JSON.parse(t.data);console.log("EVENT",s.type,s),"function"==typeof R[s.type]?R[s.type](s,e):console.log("Unknown message type: "+s.type)}}),[]),Object(j.jsx)(L.Provider,{value:[o,l],children:Object(j.jsxs)("div",{className:"full-height ".concat(s?"bg-light":""),style:{backgroundColor:s?void 0:"#495057"},children:[Object(j.jsx)(ue,{}),s?Object(j.jsx)(m,{onLogIn:T,setShowLogin:n}):Object(j.jsx)(de,{user:o.user,users:o.users,onMessageSend:W,onLogOut:function(){localStorage.clear(),n(!0)}})]})})};a.a.render(Object(j.jsx)(be,{}),document.getElementById("root"))}},[[67,1,2]]]);
//# sourceMappingURL=main.0f170182.chunk.js.map